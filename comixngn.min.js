/*! comix-ngn v0.0.0 | (c) 2015 Oluwaseun Ogedengbe| seun40.github.io/comic-ng/ |License: MIT|
embeds domReady: github.com/ded/domready (MIT) (c) 2013 Dustin Diaz, pegasus: typicode.github.io/pegasus (MIT) (c) 2014 typicode, pathjs (MIT) (c) 2011 Mike Trpcic, HTMLparser (MIT) (c) 2015 Oluwaseun Ogedengbe, swipe: swipejs.com (MIT) (c) 2013 Brad Birdsall*/
function N(){return 0}function syncJSON(t){/*! http://stackoverflow.com/a/4117299*/
var e=loadTextFileAjaxSync(t,"application/json");return e?JSON.parse(e):0}function loadTextFileAjaxSync(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!1),null!=e&&n.overrideMimeType&&n.overrideMimeType(e),n.send(),n.status<200||n.status>304?null:n.responseText}function jstagecreate(){if(""==cG.script||""==cG.templates.actor||""==cG.templates.stage)return void setTimeout(jstagecreate,300);var t=document.createElement("div");t.setAttribute("id","stage"),t.setAttribute("class","swipe");var e=document.createElement("div");for(e.setAttribute("class","swipe-wrap"),i=0;i<cG.script.pages.length;i++){var n=document.createElement("div"),o=document.createElement("img");o.setAttribute("src","assets/"+cG.script.pages[i].url),n.appendChild(o),e.appendChild(n)}t.appendChild(e);var a=document.createElement("p");a.setAttribute("class","controls");var r=document.createElement("button"),s=document.createElement("button"),c=document.createElement("button"),d=(document.createElement("input"),document.createElement("button")),l=document.createElement("button");r.setAttribute("class","frs"),s.setAttribute("class","frs"),d.setAttribute("class","las"),l.setAttribute("class","las"),r.setAttribute("onclick","window.mySwipe.slide(0, 400);"),r.appendChild(document.createTextNode("FIRST")),s.setAttribute("onclick","window.mySwipe.prev();"),s.appendChild(document.createTextNode("PREV")),d.setAttribute("onclick","window.mySwipe.next();"),d.appendChild(document.createTextNode("NEXT")),c.setAttribute("onclick","window.mySwipe.slide(Math.floor(Math.random() * 39),400);"),c.appendChild(document.createTextNode("?")),l.setAttribute("onclick","window.mySwipe.slide(window.mySwipe.getNumSlides()-1,400);"),l.appendChild(document.createTextNode("LAST")),a.appendChild(r),a.appendChild(s),a.appendChild(d),a.appendChild(l),a.appendChild(c),document.body.appendChild(a),document.body.appendChild(t),document.body.appendChild(t),window.mySwipe=new cG.stage(document.getElementById("stage"),{startSlide:0,speed:400,auto:3e3,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(){},transitionEnd:function(){}}),cG.stage_ctrls(window.mySwipe)}function stageInjection(){if(""==cG.script||""==cG.templates.actor||""==cG.templates.stage||""==cG.costumes)return void setTimeout(stageInjection,300);if(!cG.script)return console.error("No script.JSON found. script.JSON is REQUIRED to create stage. Please create a script.JSON or move it to the directory specified in the script tag for comix-ngn or bellerophon if it is added.");var t,e,n,o,a=cG.templates.stage,r=cG.templates.actor,s=cG.costumes,c=document.getElementsByClassName("venue"),d="",l="",u="",h={};for(i=0;i<c.length;i++){if(d=c[i].getAttribute("id"),l=c[i].getAttribute("script"),u=c[i].getAttribute("use"),""==d){for(var p="STG"+i,f=1;document.getElementById(p);)p="STG"+(i+f++);d=""+p,c[i].setAttribute("id",d)}""==l?e=cG.script:(e=syncJSON(l),e||(e=cG.script.extras[parseInt(l,10)],void 0===e?e=cG.script:void 0!==e.link&&(e=syncJSON(e.link),e||(e=cG.script)))),""==u?(h.stage=cG.stage,h.stageID=cG.stageID,h.scenography=cG.scenography,h.stage_ctrls=cG.stage_ctrls,h.templates=cG.templates):(h=cG.stageREPO[u],void 0===h?(h.stage=cG.stage,h.stageID=cG.stageID,h.scenography=cG.scenography,h.stage_ctrls=cG.stage_ctrls,h.templates=cG.templates):h.stageID=u),n=c[i].cloneNode(!1),o=FEbyIdAI(n,["venue","location","target","ig"],[s,a,r]),console.log(o)}console.log("TEST",a,r,s,c,n,d,l,u,t,e,h)}function FEbyIdAI_childnode(t,e,n){var i=0;for(a=0;a<t.childNodes.length;a++)i=e.indexOf(t.childNodes[a].getAttribute("id"))+1,i&&(t.childNodes[a].innerHTML=n[i-1]),i=0,t.childNodes[a].length>0&&FEbyIdAI_childnode(t.childNodes[a],e,n)}function FEbyIdAI(t,e,n){var i,o=[],r=e.indexOf(t.getAttribute("id"))+1;if(!r){for(i=t.className.split(" "),b=0;b<i.length&&(r=e.indexOf(i[b]),r<0);b++);r++}for(r&&(t.innerHTML=n[r-1],o.push(t)),a=0;a<t.children.length;a++)o=o.concat(FEbyIdAI(t.children[a],e,n));return o}if(void 0===cG)var cG={};cG.info={vers_ix:{status:1,major:3,minor:0,version:function(){return""+this.status+"."+this.major+"."+this.minor},changelog:{"0.5.0":"Initial Setup, Versioning","0.7.5":"Added Dependencies (JS): (jquery.min, angular-touch.min, angular.min[Update],bootstrap.min), Carousel for slides, real-time reactivity","0.7.7":"Retooled carousel buttons, added page count checker","0.7.8":"Minor Modifications, page is aligned to center, index.html is cleaned up","0.8.2":"caruso updated, controls are now hid automatically, date is now formated, appifying the stage","0.9.8":"stage.html template created, index html cleaned up, added isrc(imaginary source) attribute to preload images but not implemented yet","1.0.0":"routing and page updating works???Page loading works, navigate by url and back button work","1.1.0":"code refactor, all external dependencies removed, new micro lib dependencies are embedded","1.1.1":"iCanHaz replaced with HTMLparser","1.2.0":"created machinery for initing stageInjection, created new template: costumes.html, that creates multiple pages for the app, added dir and script specification, added redundancy checks so that the program isn't broken when data fails to load, or there is a conflict.","1.3.0":"Depreciating HTMLparser b/c it is to unreliable."}},vers_wr:{status:0,major:9,minor:6,version:function(){return""+this.status+"."+this.major+"."+this.minor},changelog:{"0.5.0":"Initial Setup, Versioning","0.8.0":"Huge implementations, Object config by dynamic form injection for Page and Chapter, Setting config compartmentalized, design config added","0.9.0":"added pyoofreader configuration, added continue a config file, but its not implemented script wise yet, pyoofreader not fully implemented yet","0.9.6":"pyoofreader gets its own version, continue config fully implemented, cosmetic changes, now able to download a stage and a template index.html","1.0.0":"Ready for beta"}},vers_pr:{status:0,major:1,minor:0,version:function(){return""+this.status+"."+this.major+"."+this.minor},changelog:{"0.1.0":"Implemented version, counts page dif and warns of Mismatch"}}},cG.agent=void 0===cG.agent?function(t,e){return e=new XMLHttpRequest,e.open("GET",t),t=[],e.onreadystatechange=e.then=function(n,i,o){if(n&&n.call&&(t=[,n,i]),4==e.readyState&&(o=t[0|e.status/200]))try{o(JSON.parse(e.responseText),e)}catch(a){o(e.responseText,e)}},e.send(),e}:"";var Path={version:"0.8.4",map:function(t){return Path.routes.defined.hasOwnProperty(t)?Path.routes.defined[t]:new Path.core.route(t)},root:function(t){Path.routes.root=t},rescue:function(t){Path.routes.rescue=t},history:{initial:{},pushState:function(t,e,n){Path.history.supported?Path.dispatch(n)&&history.pushState(t,e,n):Path.history.fallback&&(window.location.hash="#"+n)},popState:function(){var t=!Path.history.initial.popped&&location.href==Path.history.initial.URL;Path.history.initial.popped=!0,t||Path.dispatch(document.location.pathname)},listen:function(t){if(Path.history.supported=!(!window.history||!window.history.pushState),Path.history.fallback=t,Path.history.supported)Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href,window.onpopstate=Path.history.popState;else if(Path.history.fallback){for(route in Path.routes.defined)"#"!=route.charAt(0)&&(Path.routes.defined["#"+route]=Path.routes.defined[route],Path.routes.defined["#"+route].path="#"+route);Path.listen()}}},match:function(t,e){var n,i,o,a,r,s={},c=null;for(c in Path.routes.defined)if(null!==c&&void 0!==c)for(c=Path.routes.defined[c],n=c.partition(),a=0;a<n.length;a++){if(i=n[a],r=t,i.search(/:/)>0)for(o=0;o<i.split("/").length;o++)o<r.split("/").length&&":"===i.split("/")[o].charAt(0)&&(s[i.split("/")[o].replace(/:/,"")]=r.split("/")[o],r=r.replace(r.split("/")[o],i.split("/")[o]));if(i===r)return e&&(c.params=s),c}return null},dispatch:function(t){var e,n;if(Path.routes.current!==t){if(Path.routes.previous=Path.routes.current,Path.routes.current=t,n=Path.match(t,!0),Path.routes.previous&&(e=Path.match(Path.routes.previous),null!==e&&null!==e.do_exit&&e.do_exit()),null!==n)return n.run(),!0;null!==Path.routes.rescue&&Path.routes.rescue()}},listen:function(){var t=function(){Path.dispatch(location.hash)};""===location.hash&&null!==Path.routes.root&&(location.hash=Path.routes.root),!("onhashchange"in window)||document.documentMode&&document.documentMode<8?setInterval(t,50):window.onhashchange=t,""!==location.hash&&Path.dispatch(location.hash)},core:{route:function(t){this.path=t,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},Path.routes.defined[t]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(t){return this.action=t,this},enter:function(t){return t instanceof Array?this.do_enter=this.do_enter.concat(t):this.do_enter.push(t),this},exit:function(t){return this.do_exit=t,this},partition:function(){for(var t,e,n=[],i=[],o=/\(([^}]+?)\)/g;t=o.exec(this.path);)n.push(t[1]);for(i.push(this.path.split("(")[0]),e=0;e<n.length;e++)i.push(i[i.length-1]+n[e]);return i},run:function(){var t,e,n=!1;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")&&Path.routes.defined[this.path].do_enter.length>0)for(t=0;t<Path.routes.defined[this.path].do_enter.length;t++)if(e=Path.routes.defined[this.path].do_enter[t](),e===!1){n=!0;break}n||Path.routes.defined[this.path].action()}},cG.director=Path,cG.producer=N,cG.coproducer=N,cG.stageID="default",cG.stage=function(t,e){"use strict";function n(){m=y.children,b=m.length,m.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&m.length<3&&(y.appendChild(m[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),m=y.children),g=Array(m.length),v=t.getBoundingClientRect().width||t.offsetWidth,y.style.width=m.length*v+"px";for(var n=m.length;n--;){var i=m[n];i.style.width=v+"px",i.setAttribute("data-index",n),f.transitions&&(i.style.left=n*-v+"px",s(n,w>n?-v:n>w?v:0,0))}e.continuous&&f.transitions&&(s(a(w-1),-v,0),s(a(w+1),v,0)),f.transitions||(y.style.left=w*-v+"px"),t.style.visibility="visible"}function i(){e.continuous?r(w-1):w&&r(w-1)}function o(){e.continuous?r(w+1):w<m.length-1&&r(w+1)}function a(t){return(m.length+t%m.length)%m.length}function r(t,n){if(w!=t){if(f.transitions){var i=Math.abs(w-t)/(w-t);if(e.continuous){var o=i;i=-g[a(t)]/v,i!==o&&(t=-i*m.length+t)}for(var r=Math.abs(w-t)-1;r--;)s(a((t>w?t:w)-r-1),v*i,0);t=a(t),s(w,v*i,n||x),s(t,0,n||x),e.continuous&&s(a(t-i),-(v*i),0)}else t=a(t),d(w*-v,t*-v,n||x);w=t,p(e.callback&&e.callback(w,m[w]))}}function s(t,e,n){c(t,e,n),g[t]=e}function c(t,e,n){var i=m[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=n+"ms",o.webkitTransform="translate("+e+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+e+"px)")}function d(t,n,i){if(!i)return void(y.style.left=n+"px");var o=+new Date,a=setInterval(function(){var r=+new Date-o;return r>i?(y.style.left=n+"px",P&&l(),e.transitionEnd&&e.transitionEnd.call(event,w,m[w]),void clearInterval(a)):void(y.style.left=(n-t)*(Math.floor(r/i*100)/100)+t+"px")},4)}function l(){E=setTimeout(o,P)}function u(){P=0,clearTimeout(E)}var h=function(){},p=function(t){setTimeout(t||h,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(document.createElement("swipe"))};if(t){var m,g,v,b,y=t.children[0];e=e||{};var w=parseInt(e.startSlide,10)||0,x=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var E,G,P=e.auto||0,T={},S={},k={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":p(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(this.transitionEnd(t));break;case"resize":p(n)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];T={x:e.pageX,y:e.pageY,time:+new Date},G=void 0,S={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];S={x:n.pageX-T.x,y:n.pageY-T.y},void 0===G&&(G=!(!G&&Math.abs(S.x)>=Math.abs(S.y))),G||(t.preventDefault(),u(),e.continuous?(c(a(w-1),S.x+g[a(w-1)],0),c(w,S.x+g[w],0),c(a(w+1),S.x+g[a(w+1)],0)):(S.x=S.x/(!w&&S.x>0||w==m.length-1&&S.x<0?Math.abs(S.x)/v+1:1),c(w-1,S.x+g[w-1],0),c(w,S.x+g[w],0),c(w+1,S.x+g[w+1],0)))}},end:function(){var t=+new Date-T.time,n=250>+t&&Math.abs(S.x)>20||Math.abs(S.x)>v/2,i=!w&&S.x>0||w==m.length-1&&S.x<0;e.continuous&&(i=!1);var o=S.x<0;G||(n&&!i?(o?(e.continuous?(s(a(w-1),-v,0),s(a(w+2),v,0)):s(w-1,-v,0),s(w,g[w]-v,x),s(a(w+1),g[a(w+1)]-v,x),w=a(w+1)):(e.continuous?(s(a(w+1),v,0),s(a(w-2),-v,0)):s(w+1,v,0),s(w,g[w]+v,x),s(a(w-1),g[a(w-1)]+v,x),w=a(w-1)),e.callback&&e.callback(w,m[w])):e.continuous?(s(a(w-1),-v,x),s(w,0,x),s(a(w+1),v,x)):(s(w-1,-v,x),s(w,0,x),s(w+1,v,x))),y.removeEventListener("touchmove",k,!1),y.removeEventListener("touchend",k,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==w&&(P&&l(),e.transitionEnd&&e.transitionEnd.call(t,w,m[w]))}};return n(),P&&l(),f.addEventListener?(f.touch&&y.addEventListener("touchstart",k,!1),f.transitions&&(y.addEventListener("webkitTransitionEnd",k,!1),y.addEventListener("msTransitionEnd",k,!1),y.addEventListener("oTransitionEnd",k,!1),y.addEventListener("otransitionend",k,!1),y.addEventListener("transitionend",k,!1)),window.addEventListener("resize",k,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(t,e){u(),r(t,e)},prev:function(){u(),i()},next:function(){u(),o()},stop:function(){u()},getPos:function(){return w},getNumSlides:function(){return b},kill:function(){u(),y.style.width="",y.style.left="";for(var t=m.length;t--;){var e=m[t];e.style.width="",e.style.left="",f.transitions&&c(t,0,0)}f.addEventListener?(y.removeEventListener("touchstart",k,!1),y.removeEventListener("webkitTransitionEnd",k,!1),y.removeEventListener("msTransitionEnd",k,!1),y.removeEventListener("oTransitionEnd",k,!1),y.removeEventListener("otransitionend",k,!1),y.removeEventListener("transitionend",k,!1),window.removeEventListener("resize",k,!1)):window.onresize=null}}}},cG.stage_ctrls=function(t){for(var e=["frst","left","rght","last","rand"],n=["slide(0, 400)","prev()","next()","slide(39,400)","slide(Math.floor(Math.random() * 39),400)"],i=0;i<e.length;i++)t[e[i]]=function(){t[n[i]]};t.indx=function(e){t.slide(Math.max(0,Math.min(e,39)),400)}},cG.scenography=document.createElement("style"),cG.templates={stage:"",actor:""},cG.script="",cG.costumes="",cG.stageREPO={};var dir="",tir="",srcs=document.getElementsByTagName("src");for(i=0;i<srcs.length&&(dir=src[i].getAttribute("dir"),""==dir);i++);for(i=0;i<srcs.length&&(tir=src[i].getAttribute("template"),""==tir);i++);if(void 0===getScript){var getScript=cG.agent(dir+"script.json");getScript.then(function(t){cG.script=t},function(t,e){console.error(t,e.status),cG.script=0})}if(void 0===getStage){var getStage=cG.agent(tir+"stage.html");getStage.then(function(t){cG.template.stage=t},function(t,e){console.error(t,e.status),cG.template.stage=0})}if(void 0===getCostumes){var getCostumes=cG.agent(tir+"costumes.html");getCostumes.then(function(t){cG.costumes=t},function(t,e){console.error(t,e.status),cG.costumes=0})}if(void 0===getActor){var getActor=cG.agent(tir+"actor.html");getActor.then(function(t){cG.template.actor=t},function(t,e){console.error(t,e.status),cG.template.actor=0})}!function(t,e){"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):this[t]=e()}("domReady",function(t){function e(t){for(p=1;t=i.shift();)t()}var n,i=[],o=!1,a=document,r=a.documentElement,s=r.doScroll,c="DOMContentLoaded",d="addEventListener",l="onreadystatechange",u="readyState",h=s?/^loaded|^c/:/^loaded|c/,p=h.test(a[u]);return a[d]&&a[d](c,n=function(){a.removeEventListener(c,n,o),e()},o),s&&a.attachEvent(l,n=function(){/^c/.test(a[u])&&(a.detachEvent(l,n),e())}),t=s?function(e){self!=top?p?e():i.push(e):function(){try{r.doScroll("left")}catch(n){return setTimeout(function(){t(e)},50)}e()}()}:function(t){p?t():i.push(t)}}),cG.scenography.setAttribute("id","scenography"),cG.scenography.appendChild(document.createTextNode('article,aside,b,body,dd,del,dfn,div,dl,dt,em,fieldset,footer,form,h1,h2,h3,h4,h5,h6,header,html,i,iframe,img,ins,kbd,label,li,nav,object,ol,p,q,samp,section,small,span,strong,table,tbody,td,tfoot,th,thead,tr,ul{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:0 0}body{-webkit-text-size-adjust:none;font-family:sans-serif;min-height:416px}h1{font-size:33px;margin:50px 0 15px;text-align:center;color:#212121}h2{font-size:14px;font-weight:700;color:#3c3c3c;margin:20px 10px 10px}small{margin:0 10px 30px;display:block;font-size:12px}a{margin:0 0 0 10px;font-size:12px;color:#3c3c3c}body,html{background:#f3f3f3}#console{font-size:12px;font-family:Inconsolata,Monaco,Consolas,"Andale Mono","Bitstream Vera Sans Mono","Courier New",Courier,monospace;color:#999;line-height:18px;margin-top:20px;max-height:150px;overflow:auto}#mySwipe div b{display:block;font-weight:700;color:#14ADE5;font-size:20px;text-align:center;margin:10px;padding:100px 10px;box-shadow:0 1px #EBEBEB;background:#fff;border-radius:3px;border:1px solid;border-color:#E5E5E5 #D3D3D3 #B9C1C6}.swipe{overflow:hidden;visibility:hidden;position:relative}.swipe-wrap{overflow:hidden;position:relative}.swipe-wrap>div{float:left;width:100%;position:relative}')),document.head.appendChild(cG.scenography),domReady(function(){document.getElementById("$COMICNGWRITER$$$")||(void 0===$GPC&&($GPC=0),console.log("%c %c %c comix-ngn  v"+cG.info.vers_ix.version()+" %c ☯ %c © 2015 Oluwaseun Ogedengbe %c Plugins: "+$GPC,"color:white; background:#2EB531","background:purple","color:white; background:#32E237","color:red; background:black","color:white; background:#2EB531","color:white; background:purple")),jstagecreate(),stageInjection()});