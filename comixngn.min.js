/*! comix-ngn v1.7.5 | (c) 2015 Oluwaseun Ogedengbe| seun40.github.io/comic-ng/ |License: MIT|
embeds domReady: github.com/ded/domready (MIT) (c) 2013 Dustin Diaz, pegasus: typicode.github.io/pegasus (MIT) (c) 2014 typicode, pathjs (MIT) (c) 2011 Mike Trpcic, HTMLparser (MIT) (c) 2015 Oluwaseun Ogedengbe, swipe: swipejs.com (MIT) (c) 2013 Brad Birdsall*/
function N(){return 0}function syncJSON(t){/*! http://stackoverflow.com/a/4117299*/
var e=loadTextFileAjaxSync(t,"application/json");return e?JSON.parse(e):0}function loadTextFileAjaxSync(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!1),null!=e&&n.overrideMimeType&&n.overrideMimeType(e),n.send(),n.status<200||n.status>304?null:n.responseText}function jstagecreate(){if(""==cG.script||""==cG.actor||""==cG.stage.body)return void setTimeout(jstagecreate,300);var t=document.createElement("div");t.setAttribute("id","stage"),t.setAttribute("class","swipe");var e=document.createElement("div");for(e.setAttribute("class","swipe-wrap"),i=0;i<cG.script.pages.length;i++){var n=document.createElement("div"),o=document.createElement("img");o.setAttribute("src","assets/"+cG.script.pages[i].url),n.appendChild(o),e.appendChild(n)}t.appendChild(e);var r=document.createElement("p");r.setAttribute("class","controls");var a=document.createElement("button"),c=document.createElement("button"),s=document.createElement("button"),d=(document.createElement("input"),document.createElement("button")),l=document.createElement("button");a.setAttribute("class","frs"),c.setAttribute("class","frs"),d.setAttribute("class","las"),l.setAttribute("class","las"),a.setAttribute("onclick","window.mySwipe.slide(0, 400);"),a.appendChild(document.createTextNode("FIRST")),c.setAttribute("onclick","window.mySwipe.prev();"),c.appendChild(document.createTextNode("PREV")),d.setAttribute("onclick","window.mySwipe.next();"),d.appendChild(document.createTextNode("NEXT")),s.setAttribute("onclick","window.mySwipe.slide(Math.floor(Math.random() * 39),400);"),s.appendChild(document.createTextNode("?")),l.setAttribute("onclick","window.mySwipe.slide(window.mySwipe.getNumSlides()-1,400);"),l.appendChild(document.createTextNode("LAST")),r.appendChild(a),r.appendChild(c),r.appendChild(d),r.appendChild(l),r.appendChild(s),document.body.appendChild(r),document.body.appendChild(t),document.body.appendChild(t),window.mySwipe=new cG.stage.function(document.getElementById("stage"),{startSlide:0,speed:400,auto:3e3,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(){},transitionEnd:function(){}}),cG.stage.controls(window.mySwipe)}function stageInjection(){if(""==cG.script||""==cG.actor||""==cG.stage.body||""==cG.decor)return void setTimeout(stageInjection,300);if(!cG.script)return console.error("No script.JSON found. script.JSON is REQUIRED to create stage. Please create a script.JSON or move it to the directory specified in the script tag for comix-ngn or bellerophon if it is added.");var e,n,o,r,a=cG.stage.body?cG.stage.body:'<p class="controls"></p><div id="stage" class="swipe"><div id="target" class="swipe-wrap"></div></div>',c=cG.actor?cG.actor:'<div><h1></h1><p><img id="ig" isrc src title alt btog></p></div>',s=cG.decor?cG.decor:'<div id="location"></div><div id="archive">Archive</div><div id="me">About Me</div>',d=document.getElementsByClassName("venue"),l="",u="",h="",p="",g={};for(i=0;i<d.length;i++){if(l=d[i].getAttribute("id"),u=d[i].getAttribute("script"),h=d[i].getAttribute("use"),""==l){for(var m="STG"+i,v=1;document.getElementById(m);)m="STG"+(i+v++);l=""+m,d[i].setAttribute("id",l)}for(""==u?e=cG.script:(e=syncJSON(u),e||(e=cG.script.extras[parseInt(u,10)],void 0===e?e=cG.script:void 0!==e.link&&(e=syncJSON(e.link),e||(e=cG.script)))),""==h?(g.stage=cG.stage,g.stageID=cG.stageID,g.scenography=cG.scenography,g.stage_ctrls=cG.stage_ctrls,g.templates=cG.templates):(g=cG.stageREPO[h],void 0===g?(g.stage=cG.stage,g.stageID=cG.stageID,g.scenography=cG.scenography,g.stage_ctrls=cG.stage_ctrls,g.templates=cG.templates):g.stageID=h),o=d[i].cloneNode(!1),r=FEbyIdAI(o,["venue","location","target"],[s,a],l),t=0;t<r.length;t++)if("target"==r[t].getAttribute("id")){p=r[t];break}for(p||console.error("target fallback not implemented"),renameEles(!1,o,l),console.log(cG.script),p.innerHTML=c,n=p.children[0].cloneNode(!0),renameEles(!0,n,l,"0"),f=0;f<cG.script.pages.length;f++)p.innerHTML+=c,console.log(cG.script.pages[f].url)}}function FEbyIdAI(t,e,n){var o,i=[],r=e.indexOf(t.getAttribute("id"))+1;if(!r){for(o=t.className.split(" "),b=0;b<o.length&&(r=e.indexOf(o[b]),r<0);b++);r++}for(r&&(t.innerHTML=n[r-1],i.push(t)),a=0;a<t.children.length;a++)i=i.concat(FEbyIdAI(t.children[a],e,n,name));return i}function renameEles(t,e,n,o){for(var i=0;i<e.children.length;i++)renameEles(!0,e.children[i],n,o);if(t){var r=void 0===n?"":n+"_",a=void 0===o?"":"_"+o;e.setAttribute("id",r+e.getAttribute("id")+a)}}if(void 0===cG)var cG={};cG.root="",cG.info={vers_ix:{status:1,major:7,minor:5,version:function(){return""+this.status+"."+this.major+"."+this.minor},changelog:{"0.5.0":"Initial Setup, Versioning","0.7.5":"Added Dependencies (JS): (jquery.min, angular-touch.min, angular.min[Update],bootstrap.min), Carousel for slides, real-time reactivity","0.7.7":"Retooled carousel buttons, added page count checker","0.7.8":"Minor Modifications, page is aligned to center, index.html is cleaned up","0.8.2":"caruso updated, controls are now hid automatically, date is now formated, appifying the stage","0.9.8":"stage.html template created, index html cleaned up, added isrc(imaginary source) attribute to preload images but not implemented yet","1.0.0":"routing and page updating works???Page loading works, navigate by url and back button work","1.1.0":"code refactor, all external dependencies removed, new micro lib dependencies are embedded","1.1.1":"iCanHaz replaced with HTMLparser","1.2.0":"created machinery for initing stageInjection, created new template: costumes.html, that creates multiple pages for the app, added dir and script specification, added redundancy checks so that the program isn't broken when data fails to load, or there is a conflict.","1.3.0":"Depreciating HTMLparser b/c it is to unreliable.","1.4.1":"Reorganize CG structure to allow plugins to simply append rather than replace. Reorganize directory","1.7.5":"Complete addition of REPO system"}},vers_wr:{status:0,major:9,minor:6,version:function(){return""+this.status+"."+this.major+"."+this.minor},changelog:{"0.5.0":"Initial Setup, Versioning","0.8.0":"Huge implementations, Object config by dynamic form injection for Page and Chapter, Setting config compartmentalized, design config added","0.9.0":"added pyoofreader configuration, added continue a config file, but its not implemented script wise yet, pyoofreader not fully implemented yet","0.9.6":"pyoofreader gets its own version, continue config fully implemented, cosmetic changes, now able to download a stage and a template index.html","1.0.0":"Ready for beta"}},vers_pr:{status:0,major:1,minor:0,version:function(){return""+this.status+"."+this.major+"."+this.minor},changelog:{"0.1.0":"Implemented version, counts page dif and warns of Mismatch"}}};var Path={version:"0.8.4",map:function(t){return Path.routes.defined.hasOwnProperty(t)?Path.routes.defined[t]:new Path.core.route(t)},root:function(t){Path.routes.root=t},rescue:function(t){Path.routes.rescue=t},history:{initial:{},pushState:function(t,e,n){Path.history.supported?Path.dispatch(n)&&history.pushState(t,e,n):Path.history.fallback&&(window.location.hash="#"+n)},popState:function(){var t=!Path.history.initial.popped&&location.href==Path.history.initial.URL;Path.history.initial.popped=!0,t||Path.dispatch(document.location.pathname)},listen:function(t){if(Path.history.supported=!(!window.history||!window.history.pushState),Path.history.fallback=t,Path.history.supported)Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href,window.onpopstate=Path.history.popState;else if(Path.history.fallback){for(route in Path.routes.defined)"#"!=route.charAt(0)&&(Path.routes.defined["#"+route]=Path.routes.defined[route],Path.routes.defined["#"+route].path="#"+route);Path.listen()}}},match:function(t,e){var n,o,i,r,a,c={},s=null;for(s in Path.routes.defined)if(null!==s&&void 0!==s)for(s=Path.routes.defined[s],n=s.partition(),r=0;r<n.length;r++){if(o=n[r],a=t,o.search(/:/)>0)for(i=0;i<o.split("/").length;i++)i<a.split("/").length&&":"===o.split("/")[i].charAt(0)&&(c[o.split("/")[i].replace(/:/,"")]=a.split("/")[i],a=a.replace(a.split("/")[i],o.split("/")[i]));if(o===a)return e&&(s.params=c),s}return null},dispatch:function(t){var e,n;if(Path.routes.current!==t){if(Path.routes.previous=Path.routes.current,Path.routes.current=t,n=Path.match(t,!0),Path.routes.previous&&(e=Path.match(Path.routes.previous),null!==e&&null!==e.do_exit&&e.do_exit()),null!==n)return n.run(),!0;null!==Path.routes.rescue&&Path.routes.rescue()}},listen:function(){var t=function(){Path.dispatch(location.hash)};""===location.hash&&null!==Path.routes.root&&(location.hash=Path.routes.root),!("onhashchange"in window)||document.documentMode&&document.documentMode<8?setInterval(t,50):window.onhashchange=t,""!==location.hash&&Path.dispatch(location.hash)},core:{route:function(t){this.path=t,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},Path.routes.defined[t]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(t){return this.action=t,this},enter:function(t){return t instanceof Array?this.do_enter=this.do_enter.concat(t):this.do_enter.push(t),this},exit:function(t){return this.do_exit=t,this},partition:function(){for(var t,e,n=[],o=[],i=/\(([^}]+?)\)/g;t=i.exec(this.path);)n.push(t[1]);for(o.push(this.path.split("(")[0]),e=0;e<n.length;e++)o.push(o[o.length-1]+n[e]);return o},run:function(){var t,e,n=!1;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")&&Path.routes.defined[this.path].do_enter.length>0)for(t=0;t<Path.routes.defined[this.path].do_enter.length;t++)if(e=Path.routes.defined[this.path].do_enter[t](),e===!1){n=!0;break}n||Path.routes.defined[this.path].action()}},!function(t,e){"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):this[t]=e()}("domReady",function(t){function e(t){for(p=1;t=o.shift();)t()}var n,o=[],i=!1,r=document,a=r.documentElement,c=a.doScroll,s="DOMContentLoaded",d="addEventListener",l="onreadystatechange",u="readyState",h=c?/^loaded|^c/:/^loaded|c/,p=h.test(r[u]);return r[d]&&r[d](s,n=function(){r.removeEventListener(s,n,i),e()},i),c&&r.attachEvent(l,n=function(){/^c/.test(r[u])&&(r.detachEvent(l,n),e())}),t=c?function(e){self!=top?p?e():o.push(e):function(){try{a.doScroll("left")}catch(n){return setTimeout(function(){t(e)},50)}e()}()}:function(t){p?t():o.push(t)}}),void 0===cG.REPO&&(cG.REPO={}),cG.REPO.agent={"default":function(t,e){return e=new XMLHttpRequest,e.open("GET",t),t=[],e.onreadystatechange=e.then=function(n,o,i){if(n&&n.call&&(t=[,n,o]),4==e.readyState&&(i=t[0|e.status/200]))try{i(JSON.parse(e.responseText),e)}catch(r){i(e.responseText,e)}},e.send(),e}},cG.REPO.director={"default":Path},cG.REPO.producer={"default":N},void 0===cG.REPO.stage&&(cG.REPO.stage={"default":{body:""}}),cG.REPO.stage.default.id="default",cG.REPO.stage.default.function=function(t,e){"use strict";function n(){g=E.children,G=g.length,g.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&g.length<3&&(E.appendChild(g[0].cloneNode(!0)),E.appendChild(E.children[1].cloneNode(!0)),g=E.children),m=Array(g.length),v=t.getBoundingClientRect().width||t.offsetWidth,E.style.width=g.length*v+"px";for(var n=g.length;n--;){var o=g[n];o.style.width=v+"px",o.setAttribute("data-index",n),f.transitions&&(o.style.left=n*-v+"px",c(n,P>n?-v:n>P?v:0,0))}e.continuous&&f.transitions&&(c(r(P-1),-v,0),c(r(P+1),v,0)),f.transitions||(E.style.left=P*-v+"px"),t.style.visibility="visible"}function o(){e.continuous?a(P-1):P&&a(P-1)}function i(){e.continuous?a(P+1):P<g.length-1&&a(P+1)}function r(t){return(g.length+t%g.length)%g.length}function a(t,n){if(P!=t){if(f.transitions){var o=Math.abs(P-t)/(P-t);if(e.continuous){var i=o;o=-m[r(t)]/v,o!==i&&(t=-o*g.length+t)}for(var a=Math.abs(P-t)-1;a--;)c(r((t>P?t:P)-a-1),v*o,0);t=r(t),c(P,v*o,n||b),c(t,0,n||b),e.continuous&&c(r(t-o),-(v*o),0)}else t=r(t),d(P*-v,t*-v,n||b);P=t,p(e.callback&&e.callback(P,g[P]))}}function c(t,e,n){s(t,e,n),m[t]=e}function s(t,e,n){var o=g[t],i=o&&o.style;i&&(i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+e+"px,0)translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+e+"px)")}function d(t,n,o){if(!o)return void(E.style.left=n+"px");var i=+new Date,r=setInterval(function(){var a=+new Date-i;return a>o?(E.style.left=n+"px",O&&l(),e.transitionEnd&&e.transitionEnd.call(event,P,g[P]),void clearInterval(r)):void(E.style.left=(n-t)*(Math.floor(a/o*100)/100)+t+"px")},4)}function l(){y=setTimeout(i,O)}function u(){O=0,clearTimeout(y)}var h=function(){},p=function(t){setTimeout(t||h,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(document.createElement("swipe"))};if(t){var g,m,v,G,E=t.children[0];e=e||{};var P=parseInt(e.startSlide,10)||0,b=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var y,w,O=e.auto||0,R={},x={},T={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":p(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(this.transitionEnd(t));break;case"resize":p(n)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];R={x:e.pageX,y:e.pageY,time:+new Date},w=void 0,x={},E.addEventListener("touchmove",this,!1),E.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];x={x:n.pageX-R.x,y:n.pageY-R.y},void 0===w&&(w=!(!w&&Math.abs(x.x)>=Math.abs(x.y))),w||(t.preventDefault(),u(),e.continuous?(s(r(P-1),x.x+m[r(P-1)],0),s(P,x.x+m[P],0),s(r(P+1),x.x+m[r(P+1)],0)):(x.x=x.x/(!P&&x.x>0||P==g.length-1&&x.x<0?Math.abs(x.x)/v+1:1),s(P-1,x.x+m[P-1],0),s(P,x.x+m[P],0),s(P+1,x.x+m[P+1],0)))}},end:function(){var t=+new Date-R.time,n=250>+t&&Math.abs(x.x)>20||Math.abs(x.x)>v/2,o=!P&&x.x>0||P==g.length-1&&x.x<0;e.continuous&&(o=!1);var i=x.x<0;w||(n&&!o?(i?(e.continuous?(c(r(P-1),-v,0),c(r(P+2),v,0)):c(P-1,-v,0),c(P,m[P]-v,b),c(r(P+1),m[r(P+1)]-v,b),P=r(P+1)):(e.continuous?(c(r(P+1),v,0),c(r(P-2),-v,0)):c(P+1,v,0),c(P,m[P]+v,b),c(r(P-1),m[r(P-1)]+v,b),P=r(P-1)),e.callback&&e.callback(P,g[P])):e.continuous?(c(r(P-1),-v,b),c(P,0,b),c(r(P+1),v,b)):(c(P-1,-v,b),c(P,0,b),c(P+1,v,b))),E.removeEventListener("touchmove",T,!1),E.removeEventListener("touchend",T,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==P&&(O&&l(),e.transitionEnd&&e.transitionEnd.call(t,P,g[P]))}};return n(),O&&l(),f.addEventListener?(f.touch&&E.addEventListener("touchstart",T,!1),f.transitions&&(E.addEventListener("webkitTransitionEnd",T,!1),E.addEventListener("msTransitionEnd",T,!1),E.addEventListener("oTransitionEnd",T,!1),E.addEventListener("otransitionend",T,!1),E.addEventListener("transitionend",T,!1)),window.addEventListener("resize",T,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(t,e){u(),a(t,e)},prev:function(){u(),o()},next:function(){u(),i()},stop:function(){u()},getPos:function(){return P},getNumSlides:function(){return G},kill:function(){u(),E.style.width="",E.style.left="";for(var t=g.length;t--;){var e=g[t];e.style.width="",e.style.left="",f.transitions&&s(t,0,0)}f.addEventListener?(E.removeEventListener("touchstart",T,!1),E.removeEventListener("webkitTransitionEnd",T,!1),E.removeEventListener("msTransitionEnd",T,!1),E.removeEventListener("oTransitionEnd",T,!1),E.removeEventListener("otransitionend",T,!1),E.removeEventListener("transitionend",T,!1),window.removeEventListener("resize",T,!1)):window.onresize=null}}}},cG.REPO.stage.default.controls=function(t){for(var e=["frst","left","rght","last","rand"],n=["slide(0, 400)","prev()","next()","slide(39,400)","slide(Math.floor(Math.random() * 39),400)"],o=0;o<e.length;o++)t[e[o]]=function(){t[n[o]]};t.indx=function(e){t.slide(Math.max(0,Math.min(e,39)),400)}},cG.REPO.stage.default.scenography=document.createElement("style"),cG.REPO.stage.default.scenography.setAttribute("id","scenography"),cG.REPO.stage.default.scenography.appendChild(document.createTextNode('article,aside,b,body,dd,del,dfn,div,dl,dt,em,fieldset,footer,form,h1,h2,h3,h4,h5,h6,header,html,i,iframe,img,ins,kbd,label,li,nav,object,ol,p,q,samp,section,small,span,strong,table,tbody,td,tfoot,th,thead,tr,ul{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:0 0}body{-webkit-text-size-adjust:none;font-family:sans-serif;min-height:416px}h1{font-size:33px;margin:50px 0 15px;text-align:center;color:#212121}h2{font-size:14px;font-weight:700;color:#3c3c3c;margin:20px 10px 10px}small{margin:0 10px 30px;display:block;font-size:12px}a{margin:0 0 0 10px;font-size:12px;color:#3c3c3c}body,html{background:#f3f3f3}#console{font-size:12px;font-family:Inconsolata,Monaco,Consolas,"Andale Mono","Bitstream Vera Sans Mono","Courier New",Courier,monospace;color:#999;line-height:18px;margin-top:20px;max-height:150px;overflow:auto}#mySwipe div b{display:block;font-weight:700;color:#14ADE5;font-size:20px;text-align:center;margin:10px;padding:100px 10px;box-shadow:0 1px #EBEBEB;background:#fff;border-radius:3px;border:1px solid;border-color:#E5E5E5 #D3D3D3 #B9C1C6}.swipe{overflow:hidden;visibility:hidden;position:relative}.swipe-wrap{overflow:hidden;position:relative}.swipe-wrap>div{float:left;width:100%;position:relative}')),void 0===cG.REPO.actor&&(cG.REPO.actor={"default":""}),void 0===cG.REPO.decor&&(cG.REPO.decor={"default":""}),void 0===cG.REPO.script&&(cG.REPO.script={"default":""}),cG.agent=cG.REPO.agent.default,cG.director=cG.REPO.director.default,cG.producer=cG.REPO.producer.default,cG.actor=cG.REPO.actor.default,cG.decor=cG.REPO.decor.default,cG.script=cG.REPO.script.default,cG.stage=cG.REPO.stage.default,document.head.appendChild(cG.stage.scenography);var dir="",tir="",srcs=document.getElementsByTagName("src");for(i=0;i<srcs.length&&(dir=src[i].getAttribute("dir"),""==dir);i++);for(i=0;i<srcs.length&&(tir=src[i].getAttribute("template"),""==tir);i++);for(i=0;i<srcs.length&&(cG.root=src[i].getAttribute("plugin"),""==cG.root);i++);if(""==cG.root&&(cG.root="default"),void 0===getScript){var getScript=cG.agent(dir+"script.json");getScript.then(function(t){cG.script=cG.REPO.script.default=t},function(t,e){console.error(t,e.status),cG.script=cG.REPO.script.default=0})}if(void 0===getStage){var getStage=cG.agent(tir+"stage.html");getStage.then(function(t){cG.stage.body=cG.REPO.stage.default.body=t},function(t,e){console.error(t,e.status),cG.stage.body=cG.REPO.stage.default.body=0})}if(void 0===getDecor){var getDecor=cG.agent(tir+"costumes.html");getDecor.then(function(t){cG.decor=cG.REPO.decor.default=t},function(t,e){console.error(t,e.status),cG.decor=cG.REPO.decor.default=0})}if(void 0===getActor){var getActor=cG.agent(tir+"actor.html");getActor.then(function(t){cG.actor=cG.REPO.actor.default=t},function(t,e){console.error(t,e.status),cG.actor=cG.REPO.actor.default=0})}domReady(function(){document.getElementById("$COMICNGWRITER$$$")||(void 0===$GPC&&($GPC=0),console.log("%c %c %c comix-ngn  v"+cG.info.vers_ix.version()+" %c ☯ %c © 2015 Oluwaseun Ogedengbe %c Plugins: "+$GPC,"color:white; background:#2EB531","background:purple","color:white; background:#32E237","color:red; background:black","color:white; background:#2EB531","color:white; background:purple")),console.log(JSON.stringify(cG,null,2)),jstagecreate()});